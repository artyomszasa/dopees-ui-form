var __decorate = this && this.__decorate || function (decorators, target, key, desc) {
  var c = arguments.length,
      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,
      d;
  if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
  return c > 3 && r && Object.defineProperty(target, key, r), r;
};

import { property, observe } from "@polymer/decorators/lib/decorators.js";
import { dedupingMixin } from "@polymer/polymer/lib/utils/mixin.js";
export const keyIsField = Symbol('isField');
export const instanceofField = node => {
  let proto = node.constructor;

  while (proto) {
    if (true === proto[keyIsField]) {
      return true;
    }

    proto = Object.getPrototypeOf(proto);
  }

  return false;
};
const keyLastFocused = Symbol('lastFocused');
export const ValidationMixin = dedupingMixin(base => {
  class SomeFieldWithValidation extends base {
    performValidation() {
      if (this.activated) {
        this.validationMessage = this.validate();
      }
    }

    validateOnFocusChange(focused) {
      const lastFocused = this[keyLastFocused] || false;

      if (focused || !lastFocused) {
        return;
      }

      this.validationMessage = this.validate();
    }

  }

  __decorate([observe('value')], SomeFieldWithValidation.prototype, "performValidation", null);

  __decorate([observe('focused')], SomeFieldWithValidation.prototype, "validateOnFocusChange", null);

  ;
  return SomeFieldWithValidation;
});
export const FieldMixin = dedupingMixin(base => {
  class SomeField extends base {
    constructor() {
      super(...arguments);
      this.activated = false;
      this.dirty = false;
      this.readonly = false;
      this.required = false;
      this.focused = false;
      this.invalid = false;
    }

    activate() {
      throw new Error('activate not implemented');
    }

    validate() {
      return undefined;
    }

    validationMessageChanged(validationMessage) {
      this.invalid = !!validationMessage;
    }

  }

  __decorate([property({
    type: Boolean,
    notify: true,
    reflectToAttribute: true
  })], SomeField.prototype, "activated", void 0);

  __decorate([property({
    type: Boolean,
    notify: true,
    reflectToAttribute: true
  })], SomeField.prototype, "dirty", void 0);

  __decorate([property({
    type: Boolean,
    reflectToAttribute: true
  })], SomeField.prototype, "readonly", void 0);

  __decorate([property({
    type: Boolean,
    reflectToAttribute: true
  })], SomeField.prototype, "required", void 0);

  __decorate([property({
    type: Boolean,
    notify: true,
    reflectToAttribute: true
  })], SomeField.prototype, "focused", void 0);

  __decorate([property({
    type: Boolean,
    notify: true,
    reflectToAttribute: true
  })], SomeField.prototype, "invalid", void 0);

  __decorate([property({
    type: Boolean,
    notify: true,
    reflectToAttribute: true
  })], SomeField.prototype, "empty", void 0);

  __decorate([property({
    type: String
  })], SomeField.prototype, "requiredMessage", void 0);

  __decorate([property({
    type: String,
    notify: true
  })], SomeField.prototype, "validationMessage", void 0);

  __decorate([observe('validationMessage')], SomeField.prototype, "validationMessageChanged", null);

  ;
  SomeField.constructor[keyIsField] = true;
  return SomeField;
});
export const DecoratedWrapperMixin = dedupingMixin(base => {
  class SomeDecoratedField extends base {
    constructor() {
      super(...arguments);
      this.label = '';
    }

  }

  __decorate([property({
    type: String
  })], SomeDecoratedField.prototype, "label", void 0);

  __decorate([property({
    type: String
  })], SomeDecoratedField.prototype, "hint", void 0);

  ;
  return SomeDecoratedField;
});
export const DecoratedFieldMixin = base => DecoratedWrapperMixin(FieldMixin(base));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEtBQXlCLENBQXpCLENBQUE7O0FBR0EsRUFBQSxVQUFBLENBQUEsQ0FEQyxRQUFRLENBQUM7QUFBRSxJQUFBLElBQUksRUFBRSxNQUFSO0FBQWdCLElBQUEsTUFBTSxFQUFFO0FBQXhCLEdBQUQsQ0FDVCxDQUFBLEUsbUJBQUEsRSxtQkFBQSxFLEtBQTJCLENBQTNCLENBQUE7O0FBT0EsRUFBQSxVQUFBLENBQUEsQ0FEQyxPQUFPLENBQUMsbUJBQUQsQ0FDUixDQUFBLEUsbUJBQUEsRSwwQkFBQSxFQUVDLElBRkQsQ0FBQTs7QUFHRDtBQUNELEVBQUEsU0FBUyxDQUFDLFdBQVYsQ0FBc0IsVUFBdEIsSUFBb0MsSUFBcEM7QUFDQSxTQUFpQyxTQUFqQztBQUNELENBekNzQyxDQUFoQztBQTJDUCxPQUFPLE1BQU0scUJBQXFCLEdBQUcsYUFBYSxDQUE0QixJQUEzQixJQUE0QztBQUM3RixRQUFNLGtCQUFOLFNBQXdELElBQXhELENBQTZEO0FBQTdELElBQUEsV0FBQSxHQUFBOztBQUdFLFdBQUEsS0FBQSxHQUFpQixFQUFqQjtBQUtEOztBQVI0RDs7QUFHM0QsRUFBQSxVQUFBLENBQUEsQ0FEQyxRQUFRLENBQUM7QUFBRSxJQUFBLElBQUksRUFBRTtBQUFSLEdBQUQsQ0FDVCxDQUFBLEUsNEJBQUEsRSxPQUFBLEUsS0FBb0IsQ0FBcEIsQ0FBQTs7QUFHQSxFQUFBLFVBQUEsQ0FBQSxDQURDLFFBQVEsQ0FBQztBQUFFLElBQUEsSUFBSSxFQUFFO0FBQVIsR0FBRCxDQUNULENBQUEsRSw0QkFBQSxFLE1BQUEsRSxLQUFjLENBQWQsQ0FBQTs7QUFFRDtBQUNELFNBQXdDLGtCQUF4QztBQUNELENBWGlELENBQTNDO0FBYVAsT0FBTyxNQUFNLG1CQUFtQixHQUE4QixJQUEzQixJQUE2QyxxQkFBcUIsQ0FBQyxVQUFVLENBQUMsSUFBRCxDQUFYLENBQTlGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcHJvcGVydHksIG9ic2VydmUgfSBmcm9tICdAcG9seW1lci9kZWNvcmF0b3JzL2xpYi9kZWNvcmF0b3JzJztcbmltcG9ydCB7IGRlZHVwaW5nTWl4aW4gfSBmcm9tICdAcG9seW1lci9wb2x5bWVyL2xpYi91dGlscy9taXhpbic7XG5pbXBvcnQgeyBQb2x5bWVyRWxlbWVudCB9IGZyb20gJ0Bwb2x5bWVyL3BvbHltZXIvcG9seW1lci1lbGVtZW50JztcbmltcG9ydCB7IEN0b3IgfSBmcm9tICdzcmMvaGVscGVycyc7XG5cbmV4cG9ydCBjb25zdCBrZXlJc0ZpZWxkID0gU3ltYm9sKCdpc0ZpZWxkJyk7XG5cbmV4cG9ydCBjb25zdCBpbnN0YW5jZW9mRmllbGQgPSA8VCBleHRlbmRzIEhUTUxFbGVtZW50Pihub2RlOiBUKTogbm9kZSBpcyBUJkZpZWxkID0+IHtcbiAgbGV0IHByb3RvID0gbm9kZS5jb25zdHJ1Y3RvclxuICB3aGlsZSAocHJvdG8pIHtcbiAgICBpZiAodHJ1ZSA9PT0gcHJvdG9ba2V5SXNGaWVsZF0pIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBwcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihwcm90byk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpZWxkIHtcbiAgLyoqIERlbm90ZXMgd2hldGhlciB0aGUgZmllbGQgaGFzIGJlZW4gYWN0aXZhdGVkIGF0IGxlYXQgb25jZS4gKi9cbiAgYWN0aXZhdGVkOiBib29sZWFuO1xuICAvKiogRGVub3RlcyBmaWVsZCBkaXJ0aW5lc3MuIEZpZWxkIGlzIGNvbnNpZGVyZWQgZGlydHkgaWYgaXRzIHZhbHVlIGhhcyBjaGFuZ2VkIHNpbmNlIGxhc3QgY29tbWl0LiAqL1xuICBkaXJ0eTogYm9vbGVhbjtcbiAgLyoqIERlZmluZXMgd2hldGhlciBmaWVsZCB2YWx1ZSBpcyByZWFkb25seS4gVXN1YWxseSBkZWZpbmVkIGJ5IHRoZSBjb250YWluZXIgZWxlbWVudC4gKi9cbiAgcmVhZG9ubHk6IGJvb2xlYW47XG4gIC8qKiBEZWZpbmVzIHdoZXRoZXIgZmllbGQgdmFsdWUgaXMgcmVxdWlyZWQuIFVzdWFsbHkgZGVmaW5lZCBieSB0aGUgY29udGFpbmVyIGVsZW1lbnQuICovXG4gIHJlcXVpcmVkOiBib29sZWFuO1xuICAvKiogRGVub3RlcyBmaWVsZCBhY3RpdmVuZXNzLiBfdHJ1ZV8gaXMgdGhlIGZpZWxkIGlzIGZvY3VzZWQsIF9mYWxzZV8gb3RoZXJ3aXNlLiAqL1xuICBmb2N1c2VkOiBib29sZWFuO1xuICAvKiogRGVub3RlcyBmaWVsZCB2YWxpZGl0eSBjb21wdXRlZCB1c2luZyBmaWVsZCBzcGVjaWZpYyBjb25zdHJhaW50IHZhbGlkYXRpb24uICovXG4gIGludmFsaWQ6IGJvb2xlYW47XG4gIC8qKiBEZW5vdGVzIGZpZWxkIGVtcHRpbmVzcy4gQ29uY2VyZXRlIGZpZWxkIGltcGxlbWVudGF0aW9uIGRlZmluZXMgd2hlbiBmaWVsZCBpcyBjb25zaWRlcmVkIGVtcHR5LiAqL1xuICBlbXB0eTogYm9vbGVhbjtcbiAgLyoqIERlZmF1bHQgbWVzc2FnZSB0byBzaG93IGlmIHRoZSBpbnB1dCBpcyByZXF1aXJlZCBhbmQgbm8gdmFsdWUgaXMgcHJlc2VudC4gKi9cbiAgcmVxdWlyZWRNZXNzYWdlPzogc3RyaW5nO1xuICAvKiogQSBtZXNzYWdlIGRlc2NyaWJpbmcgdGhlIHZhbGlkYXRpb24gY29uc3RyYWludHMgdGhhdCB0aGUgY29udHJvbCBkb2VzIG5vdCBzYXRpc2Z5IChpZiBhbnkpLiAqL1xuICB2YWxpZGF0aW9uTWVzc2FnZT86IHN0cmluZztcbiAgLyoqIEFjdGl2YXRlcyBmaWVsZC4gKi9cbiAgYWN0aXZhdGUoKTogdm9pZDtcbiAgLyoqIFRyaWdnZXJlZCBvbiB2YWxpZGF0aW9uLiBSZXR1cm5zIGEgbWVzc2FnZSBkZXNjcmliaW5nIHRoZSB2YWxpZGF0aW9uIGNvbnN0cmFpbnRzIHRoYXQgdGhlIGNvbnRyb2wgZG9lcyBub3Qgc2F0aXNmeSBpZiBhbnkuICovXG4gIHZhbGlkYXRlKCk6IHN0cmluZ3x1bmRlZmluZWQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmllbGRXcmFwcGVyIHtcbiAgbGFiZWw/OiBzdHJpbmc7XG4gIGhpbnQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmFsdWVGaWVsZDxUPiBleHRlbmRzIEZpZWxkIHtcbiAgdmFsdWU6IFRcbn1cblxuZXhwb3J0IGludGVyZmFjZSBIYXNWYWxpZGF0aW9uIHtcbiAgcGVyZm9ybVZhbGlkYXRpb24oKTogdm9pZDtcbiAgdmFsaWRhdGVPbkZvY3VzQ2hhbmdlKGZvY3VzZWQ6IGJvb2xlYW4pOiB2b2lkO1xufVxuXG5jb25zdCBrZXlMYXN0Rm9jdXNlZCA9IFN5bWJvbCgnbGFzdEZvY3VzZWQnKTtcblxudHlwZSBQb2x5bWVyRmllbGQgPSBQb2x5bWVyRWxlbWVudCZGaWVsZDtcblxuZXhwb3J0IGNvbnN0IFZhbGlkYXRpb25NaXhpbiA9IGRlZHVwaW5nTWl4aW4oPFQgZXh0ZW5kcyBQb2x5bWVyRmllbGQ+KGJhc2U6IEN0b3I8VD4pID0+IHtcbiAgY2xhc3MgU29tZUZpZWxkV2l0aFZhbGlkYXRpb24gZXh0ZW5kcyAoPEN0b3I8UG9seW1lckZpZWxkPj5iYXNlKSBpbXBsZW1lbnRzIEhhc1ZhbGlkYXRpb24ge1xuXG4gICAgQG9ic2VydmUoJ3ZhbHVlJylcbiAgICBwZXJmb3JtVmFsaWRhdGlvbigpIHtcbiAgICAgIGlmICh0aGlzLmFjdGl2YXRlZCkge1xuICAgICAgICB0aGlzLnZhbGlkYXRpb25NZXNzYWdlID0gdGhpcy52YWxpZGF0ZSgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIEBvYnNlcnZlKCdmb2N1c2VkJylcbiAgICB2YWxpZGF0ZU9uRm9jdXNDaGFuZ2UoZm9jdXNlZDogYm9vbGVhbikge1xuICAgICAgY29uc3QgbGFzdEZvY3VzZWQgPSB0aGlzW2tleUxhc3RGb2N1c2VkXSB8fCBmYWxzZTtcbiAgICAgIGlmIChmb2N1c2VkIHx8ICFsYXN0Rm9jdXNlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLnZhbGlkYXRpb25NZXNzYWdlID0gdGhpcy52YWxpZGF0ZSgpO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIDxDdG9yPFQmSGFzVmFsaWRhdGlvbj4+PHVua25vd24+U29tZUZpZWxkV2l0aFZhbGlkYXRpb247XG59KTtcblxuZXhwb3J0IGNvbnN0IEZpZWxkTWl4aW4gPSBkZWR1cGluZ01peGluKDxUIGV4dGVuZHMgUG9seW1lckVsZW1lbnQ+KGJhc2U6IEN0b3I8VD4pID0+IHtcbiAgY2xhc3MgU29tZUZpZWxkIGV4dGVuZHMgKDxDdG9yPFBvbHltZXJFbGVtZW50Pj5iYXNlKSBpbXBsZW1lbnRzIEZpZWxkIHtcblxuICAgIEBwcm9wZXJ0eSh7IHR5cGU6IEJvb2xlYW4sIG5vdGlmeTogdHJ1ZSwgcmVmbGVjdFRvQXR0cmlidXRlOiB0cnVlIH0pXG4gICAgYWN0aXZhdGVkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBAcHJvcGVydHkoeyB0eXBlOiBCb29sZWFuLCBub3RpZnk6IHRydWUsIHJlZmxlY3RUb0F0dHJpYnV0ZTogdHJ1ZSB9KVxuICAgIGRpcnR5OiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBAcHJvcGVydHkoeyB0eXBlOiBCb29sZWFuLCByZWZsZWN0VG9BdHRyaWJ1dGU6IHRydWUgfSlcbiAgICByZWFkb25seTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgQHByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiwgcmVmbGVjdFRvQXR0cmlidXRlOiB0cnVlIH0pXG4gICAgcmVxdWlyZWQ6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgIEBwcm9wZXJ0eSh7IHR5cGU6IEJvb2xlYW4sIG5vdGlmeTogdHJ1ZSwgcmVmbGVjdFRvQXR0cmlidXRlOiB0cnVlIH0pXG4gICAgZm9jdXNlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgQHByb3BlcnR5KHsgdHlwZTogQm9vbGVhbiwgbm90aWZ5OiB0cnVlLCByZWZsZWN0VG9BdHRyaWJ1dGU6IHRydWUgfSlcbiAgICBpbnZhbGlkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBAcHJvcGVydHkoeyB0eXBlOiBCb29sZWFuLCBub3RpZnk6IHRydWUsIHJlZmxlY3RUb0F0dHJpYnV0ZTogdHJ1ZSB9KVxuICAgIGVtcHR5ITogYm9vbGVhbjtcblxuICAgIEBwcm9wZXJ0eSh7IHR5cGU6IFN0cmluZyB9KVxuICAgIHJlcXVpcmVkTWVzc2FnZT86IHN0cmluZztcblxuICAgIEBwcm9wZXJ0eSh7IHR5cGU6IFN0cmluZywgbm90aWZ5OiB0cnVlIH0pXG4gICAgdmFsaWRhdGlvbk1lc3NhZ2U/OiBzdHJpbmc7XG5cbiAgICBhY3RpdmF0ZSgpOiB2b2lkIHsgdGhyb3cgbmV3IEVycm9yKCdhY3RpdmF0ZSBub3QgaW1wbGVtZW50ZWQnKTsgfVxuXG4gICAgdmFsaWRhdGUoKSB7IHJldHVybiB1bmRlZmluZWQ7IH1cblxuICAgIEBvYnNlcnZlKCd2YWxpZGF0aW9uTWVzc2FnZScpXG4gICAgdmFsaWRhdGlvbk1lc3NhZ2VDaGFuZ2VkKHZhbGlkYXRpb25NZXNzYWdlOiBzdHJpbmd8dW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLmludmFsaWQgPSAhISh2YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgfVxuICB9O1xuICBTb21lRmllbGQuY29uc3RydWN0b3Jba2V5SXNGaWVsZF0gPSB0cnVlO1xuICByZXR1cm4gPEN0b3I8VCAmIEZpZWxkPj48dW5rbm93bj5Tb21lRmllbGQ7XG59KTtcblxuZXhwb3J0IGNvbnN0IERlY29yYXRlZFdyYXBwZXJNaXhpbiA9IGRlZHVwaW5nTWl4aW4oPFQgZXh0ZW5kcyBQb2x5bWVyRWxlbWVudD4oYmFzZTogQ3RvcjxUPikgPT4ge1xuICBjbGFzcyBTb21lRGVjb3JhdGVkRmllbGQgZXh0ZW5kcyAoPEN0b3I8UG9seW1lckVsZW1lbnQ+PmJhc2UpIGltcGxlbWVudHMgRmllbGRXcmFwcGVyIHtcblxuICAgIEBwcm9wZXJ0eSh7IHR5cGU6IFN0cmluZyB9KVxuICAgIGxhYmVsPzogc3RyaW5nID0gJyc7XG5cbiAgICBAcHJvcGVydHkoeyB0eXBlOiBTdHJpbmcgfSlcbiAgICBoaW50Pzogc3RyaW5nO1xuXG4gIH07XG4gIHJldHVybiA8Q3RvcjxUICYgRmllbGRXcmFwcGVyPj48dW5rbm93bj5Tb21lRGVjb3JhdGVkRmllbGQ7XG59KTtcblxuZXhwb3J0IGNvbnN0IERlY29yYXRlZEZpZWxkTWl4aW4gPSA8VCBleHRlbmRzIFBvbHltZXJFbGVtZW50PihiYXNlOiBDdG9yPFQ+KSA9PiBEZWNvcmF0ZWRXcmFwcGVyTWl4aW4oRmllbGRNaXhpbihiYXNlKSk7Il0sInNvdXJjZVJvb3QiOiIifQ==